<%- layout("/layouts/other_boilerplate.ejs") %>
<main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">
  <div class="container-fluid py-7">
    <div class="row">
      <div class="col-md-2 position-sticky top-0">
        <div class="card mb-4">
          <div class="card-header pb-0 p-3">
            <h6 class="mb-1">Filter Books</h6>
            <p class="text-sm">Find Suitable For You</p>
          </div>
          <div class="card-body p-3">
            <form action="/books" method="get">
              <div class="form-group p-2">
                <label for="genre">Select Genres</label>
                <select name="genre" class="form-select">
                  <option value="" selected>None</option>
                  <% for (const genre of genres) { %>
                    <option value="<%= genre %>" <% if (filters.genre == genre) { %> selected <% } %>><%= genre %></option>
                  <% } %>
                </select>
              </div>
              <div class="form-group p-2">
                <label for="author"> Select Author </label>
                <select name="author" class="form-select">
                  <option value="" selected>None</option>
                  <% for (const author of authors) { %>
                    <option value="<%= author %>" <% if (filters.author == author) { %> selected <% } %>><%= author %></option>
                  <% } %>
                </select>
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-sm btn-outline-primary m-2">Filter Books</button>
                <a href="/books" class="btn btn-sm btn-outline-danger m-2">Clear Filter</a>
              </div>
            </form>
          </div>
      </div>
    </div>
    <div class="col-md-10">
      <div class="card mb-4">
        <div class="card-body p-3">
          <div class="row">
            <% for (let book of books) { %>
              <div class="col-xl-3 col-md-6 mb-xl-0 mb-4 mt-4">
                <div class="card card-blog card-plain">
                  <div class="position-relative text-center">
                    <a class="shadow-xl border-radius-xl" href="/books/<%= book._id %>">
                      <img src="<%= book.imageUrl %>" alt="Cover Page" class="img-fluid shadow border-radius-xl h-100 w-50" />
                    </a>
                  </div>
                  <div class="card-body px-1 pb-0 text-center">
                    <p class="text-gradient text-dark mb-2 text-sm"><%= book.author %></p>
                    <a href="javascript:;">
                      <% const maxHeadingLength = 20; %> <% if (book.title.length > maxHeadingLength) { %>
                        <h5><%= book.title.substring(0, maxHeadingLength) %>...</h5>
                      <% } else { %>
                        <h5><%= book.title %></h5>
                      <% } %>
                    </a>
                    <p class="mb-4 text-sm"></p>
                  </div>
                </div>
              </div>
            <% } %>
            <div class="col-xl-3 col-md-6 mb-xl-0 mb-4">
              <div class="card card-blog card-plain">
                <div class="position-relative text-center">
                  <a href="/dashboard/books" class="shadow-xl border-radius-xl">
                    <img src="/images/Add-Book.png" alt="Cover Page" class="img-fluid shadow border-radius-xl h-100 w-50" />
                  </a>
                </div>
                <div class="card-body px-1 pb-0 text-center">
                  <p class="text-gradient text-dark mb-2 text-sm">Admin Only</p>
                  <h5>Add Book</h5>
                  <p class="mb-4 text-sm"></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</main>
